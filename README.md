# Тестовое задание
## Папка service
В папке сервис находится реализация веб-приложения, файлы для создания docker-контейнера и исходные файлы .cbm и pick_regno.py.

Особенности реализации:
- сервис реализован на FastAPI + uvicorn;
- имеются 2 endpoint:
    - get-запрос /ping - проверка связи;
    - post-запрос /upload_data - передача данных в виде pydantic-модели (проверка валидности данных).
- немного изменен изначальный скрипт pick_regno.py (вместо пути к ML-модели передается сама модель). Это сделано для ускорения работы endpoint;
- загрузка модели происходит не в pick_regno.py а в самом начале работы программы на том же уровне, что и инициализация FastAPI-приложения. Т.е. моедль загружается не каждый раз при передаче данных, а единожды;
- т.к. метод pick_regno - не асинхронный, то для того, чтобы его выполнение не блокировало поток метод помещен run_in_executor класса loop из asyncio, что сделано опять-таки для ускорения работы сервера.

Сервер запускается командой:
**uvicorn service.main:app**

## Папка test
В данной папке находится скрипт по отравке данных из тестового файла test_data.csv (данные в файле были продублированы, чтобы получить 500 строк)

При запуске данного скрипта осуществляются post-запросы по адресу http://127.0.0.1:8000/upload_data с данными из тестового файла. Отправки всех данных будет выведено время исполнения скрипта.

## Сбор в docker-контейнер
Собирать в контейнер необходимо только папку service, поэтому:
- переходим в корневую папку (cd)
- docker build -t image_name .
- docker run --name container_name -p 8000:8000 image_name